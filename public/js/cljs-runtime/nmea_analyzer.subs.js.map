{"version":3,"sources":["nmea_analyzer/subs.cljs"],"mappings":";AAIA,2DAAA,3DAACA,8KAEA,WAAKC;AAAL,AACE,OAAA,+FAAaA;;AAEhB,2DAAA,8HAAA,gDAAA,mFAAA,5TAACD,qYAGA,sBAAAE,XAAKG;AAAL,AAAA,IAAAF,aAAAD;QAAA,AAAAE,4CAAAD,WAAA,IAAA,/DAAiBG;YAAjB,AAAAF,4CAAAD,WAAA,IAAA,nEAAmBI;AAAnB,AACE,OAACC,4CAAIH,WAAWE;;AAEnB,2DAAA,3DAACP,+KAEA,WAAKC;AAAL,AACE,OAAA,gGAAaA;;AAEhB,2DAAA,+HAAA,gDAAA,mFAAA,7TAACD,sYAGA,WAAKK;AAAL,AACE,OAAA,qFAAQA;;AAGX,2DAAA,3DAACL,gLAEA,WAAKC;AAAL,AACE,OAAA,iGAAcA;;AAEjB,2DAAA,3DAACD,4KAEA,WAAKC;AAAL,AACE,YAAA,ZAACQ,yCAA4CR;;AAC7C,OAAA,6FAAYA;;AAEf,2DAAA,3DAACD,4LAEA,WAAKC;AAAL,AACE,OAAA,gGAAaA;;AAEhB,2DAAA,6HAAA,gDAAA,mFAAA,3TAACD,kYAGA,WAAKU;AAAL,AACE,oIACK,+CAAA,WAAAC,1DAACC,9GACD,gDAAA,hDAACG,fACDC;AAFA,AAAS,IAAAH,WAAmB,AAAA,mFAAAF;IAAnBG,eAAA,iFAAA,yDAAA,wDAAA;AAAA,AAAA,QAAAA,6CAAAA,2CAAAD,YAAAC,uBAAAD;GADTH;;AAKR,2DAAA,qHAAA,gDAAA,mFAAA,nTAACV,0XAGA,WAAKU;AAAL,AACE,oIACK,+CAAA,WAAAO,1DAACL,9GACD,gDAAA,hDAACG,fACDC;AAFA,AAAS,IAAAE,WAAmB,AAAA,mFAAAD;IAAnBE,eAAA,iFAAA,yDAAA,wDAAA;AAAA,AAAA,QAAAA,6CAAAA,2CAAAD,YAAAC,uBAAAD;GADTR;;AAKR,2DAAA,uHAAA,gDAAA,mFAAA,rTAACV,4XAGA,WAAKU;AAAL,AACE,oIACK,+CAAA,WAAAU,1DAACR,9GACD,gDAAA,hDAACG,fACDC;AAFA,AAAS,IAAAK,WAAc,AAAA,mFAAAD;IAAdE,eAAA,iFAAA,uDAAA;AAAA,AAAA,QAAAA,6CAAAA,2CAAAD,YAAAC,uBAAAD;GADTX;;AAMR,2DAAA,3DAACV,+KAEA,WAAKC;AAAL,AACE,OAAA,gGAAaA","names":["re_frame.core.reg_sub","db","p__12738","vec__12739","cljs.core.nth","connection","_","field","cljs.core.get","js/console.log","nmea-data","p1__12742#","cljs.core.filter","G__12744","fexpr__12743","cljs.core.sort_by","cljs.core/last","p1__12745#","G__12747","fexpr__12746","p1__12748#","G__12750","fexpr__12749"],"sourcesContent":[";; src/nmea_analyzer/subs.cljs\n(ns nmea-analyzer.subs\n  (:require [re-frame.core :as rf]))\n\n(rf/reg-sub\n :connection\n (fn [db]\n   (:connection db)))\n\n(rf/reg-sub\n :connection-field\n :<- [:connection]\n (fn [connection [_ field]]\n   (get connection field)))\n\n(rf/reg-sub\n :connected?\n (fn [db]\n   (:connected? db)))\n\n(rf/reg-sub\n :connection-error\n :<- [:connection]\n (fn [connection]\n   (:error connection)))\n\n;; Add this subscription for NMEA frames\n(rf/reg-sub\n :nmea-frames\n (fn [db]\n   (:nmea-frames db)))\n\n(rf/reg-sub\n :nmea-data\n (fn [db]\n   (js/console.log \"DB state in nmea-data sub:\" db)\n   (:nmea-data db)))\n\n(rf/reg-sub\n :connection-status\n (fn [db]\n   (:connected? db)))\n\n(rf/reg-sub\n :latest-position\n :<- [:nmea-data]\n (fn [nmea-data]\n   (->> nmea-data\n        (filter #(#{:GGA :RMC :GLL} (:type %)))\n        (sort-by :timestamp)\n        last)))\n\n(rf/reg-sub\n :latest-wind\n :<- [:nmea-data]\n (fn [nmea-data]\n   (->> nmea-data\n        (filter #(#{:MWV :VWR :VWT} (:type %)))\n        (sort-by :timestamp)\n        last)))\n\n(rf/reg-sub\n :latest-depth\n :<- [:nmea-data]\n (fn [nmea-data]\n   (->> nmea-data\n        (filter #(#{:DBT :DPT} (:type %)))\n        (sort-by :timestamp)\n        last)))\n\n;; Add this subscription for statistics\n(rf/reg-sub\n :statistics\n (fn [db]\n   (:statistics db)))\n"]}